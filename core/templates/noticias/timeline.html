{# templates/noticias/timeline.html #}

{% extends "base.html" %}

{% block sticky_content %}
<!-- Mobile Ticker (sticky below header, always rendered, hidden when no cluster) -->
<div id="bubble-ticker-mobile"
     class="md:hidden sticky top-0 z-40 border-b-2 border-black text-white mono {% if not has_cluster %}hidden{% endif %}"
     data-cluster-id="{{ my_cluster.id|default:'0' }}"
     x-data="{ collapsed: false }"
     x-show="!collapsed"
     x-transition>
  <div class="flex items-center">
    <a href="{% url 'cluster-visualization' %}"
       class="mobile-ticker-link flex items-center gap-2 flex-1 min-w-0 px-4 py-2 transition-colors">
      <span class="text-xs font-bold whitespace-nowrap drop-shadow">TU BURBUJA</span>
      <span id="mobile-ticker-info" class="text-xs whitespace-nowrap overflow-hidden text-ellipsis drop-shadow">
        {% load vote_extras %}
        {% if my_cluster.llm_name %}{{ my_cluster.llm_name }} | {% endif %}#{% if my_cluster.id is not None %}{{ my_cluster.id }}{% else %}?{% endif %} | {{ my_cluster.size|default:"0" }}v | <span data-consensus="{{ my_cluster.consensus|default:'0' }}">{% if my_cluster.consensus is not None %}{{ my_cluster.consensus|js_float:1 }}{% else %}0.0{% endif %}</span>
      </span>
    </a>
    <button @click="collapsed = !collapsed"
            class="mobile-ticker-close px-4 py-2 border-l border-white/30 text-[10px] transition-colors flex-shrink-0 drop-shadow">
      [Ã—]
    </button>
  </div>
</div>
{% endblock %}

{% block content %}
{% include "noticias/timeline_fragment.html" %}
{% endblock %}
