{# templates/noticias/timeline_item.html #}
<div class="timeline-item" id="noticia-{{ noticia.pk }}">
    <h3>{{ noticia.titulo }}</h3>
    <p><a href="{{ noticia.enlace }}" target="_blank">Original Link</a></p>
    {% if noticia.archivo_url %}
      <p>Archived: <a href="{{ noticia.archivo_url }}" target="_blank">{{ noticia.archivo_url }}</a></p>
    {% endif %}
    {% if noticia.archivo_fecha %}
      <p>Archive Date: {{ noticia.archivo_fecha }}</p>
    {% endif %}
    {% if noticia.archivo_imagen %}
      <img src="{{ noticia.archivo_imagen }}" alt="Screenshot" style="max-width:300px;">
    {% endif %}
    
    <!-- Add resumen, fuente, and categoria -->
    {% if noticia.resumen %}
      <p>Summary: {{ noticia.resumen }}</p>
    {% endif %}
    {% if noticia.fuente %}
      <p>Source: {{ noticia.fuente }}</p>
    {% endif %}
    {% if noticia.categoria %}
      <p>Category: {{ noticia.get_categoria_display }}</p>
    {% endif %}
    
    <!-- Add related entities with sentiment emojis -->
    {% if noticia.entidades.exists %}
      <p>Entities:</p>
      <ul>
        {% for entidad in noticia.entidades.all %}
          <li>
            {{ entidad.entidad.nombre }} 
            {% if entidad.sentimiento == "positivo" %}
              üòä
            {% elif entidad.sentimiento == "negativo" %}
              üòû
            {% else %}
              üòê
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  
    <!-- Refresh button using HTMX -->
    <button 
      hx-post="{% url 'noticia-refresh' noticia.pk %}" 
      hx-target="#noticia-{{ noticia.pk }}" 
      hx-swap="outerHTML"
      hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
      Refresh Archive
    </button>
  
    <!-- Vote area (assuming you already have a vote_area.html partial) -->
    <div id="vote-area-{{ noticia.pk }}">
      {% include "noticias/vote_area.html" with noticia=noticia %}
    </div>
  </div>
