<!-- templates/noticias/vote_area.html -->
{% load vote_extras %}
<div class="vote-area p-4 bg-gray-50 rounded">
  <p class="mb-2">
    Votes: 
    Buena: {{ noticia.votos|vote_count:"buena" }} |
    Mala: {{ noticia.votos|vote_count:"mala" }} |
    Neutral: {{ noticia.votos|vote_count:"neutral" }}
  </p>
  {% if user.is_authenticated %}
    <form hx-post="{% url 'vote' noticia.pk %}" hx-target="#vote-area-{{ noticia.pk }}" hx-swap="outerHTML" class="flex items-center space-x-2">
      {% csrf_token %}
      <select name="opinion" class="border rounded px-2 py-1">
        <option value="buena">Buena</option>
        <option value="mala">Mala</option>
        <option value="neutral">Neutral</option>
      </select>
      <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded">Vote</button>
    </form>
  {% else %}
    <p>
      <a class="text-blue-500 hover:underline" href="{% url 'login' %}?next={{ request.path }}">Log in</a> to vote.
    </p>
  {% endif %}
</div>
